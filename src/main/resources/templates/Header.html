<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<body>

<header class="navbar" th:fragment="navigation-bar">
    <div class="container">
        <div class="navbar-inner">
            <div class="brand">
                <div class="brand-logo"
                     style="width: 48px; height: 48px; display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: bold;">
                    C
                </div>
                <div>
                    <div class="brand-title">CineTalk</div>
                    <div class="brand-subtitle">Cinema Forum</div>
                </div>
            </div>

            <nav class="nav-links">
                <a th:href="@{/forum}">Home</a>
                <a th:href="@{/path/root}">Browse by folder</a>
                <a th:href="@{/forum/posts}">Browse by tag</a>
                <a href="#">About</a>
            </nav>

            <!-- Auth actions (adjust visibility server-side depending on logged-in status) -->
            <div class="auth-actions">
                <!-- When user is NOT logged in -->
                <div sec:authorize="!isAuthenticated()">
                    <a th:href="@{/auth/login}" class="btn btn-ghost">Log in</a>
                    <a th:href="@{/auth/register}" class="btn btn-primary">Register</a>
                </div>
                <!-- Show if authenticated -->
                <div sec:authorize="isAuthenticated()">
                    <a th:href="@{/forum/posts/new}" class="btn btn-ghost">New Post</a>
                    <a th:href="@{/profile}" class="btn btn-ghost">
                        <span sec:authentication="name">Username</span>
                    </a>
                    <a th:href="@{/auth/logout}" class="btn btn-danger">Logout</a>
                </div>
                <!-- Show if admin or moderator -->
                <div sec:authorize="hasRole('MODERATOR')">
                    <a th:href="@{/admin}" class="btn btn-ghost">Admin</a>
                </div>
            </div>

            <button aria-label="Toggle navigation" class="mobile-menu-toggle" onclick="toggleMobileMenu()">
                <div class="mobile-bar"></div>
                <div class="mobile-bar"></div>
            </button>
        </div>
    </div>
</header>
</body>
</html>


