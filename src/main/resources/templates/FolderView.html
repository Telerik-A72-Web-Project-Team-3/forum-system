<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>Forum App ‚Äì Home</title>
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
    <link href="/css/styles.css" rel="stylesheet"/>
</head>
<body>
<div class="page">
    <!-- NAVBAR -->
    <header th:replace="Header:: navigation-bar"></header>
    <!-- MAIN -->
    <main class="folder-page">
        <div class="container">
            <!-- Breadcrumb & header -->
            <div class="folder-breadcrumb">
                <span th:each="pathFolder, i: ${folder.pathFolders}">
                    <span th:if="${i.index > 0}">‚Ä∫</span>
                    <a th:href="@{/path/{path}(path=${pathFolder.path})}"
                       th:text="${pathFolder.name}">Folder name</a>
                </span>
            </div>

            <div class="folder-header-row">
                <div>
                    <h1 class="folder-title" th:text="${folder.name}">TV Shows</h1>
                    <div class="folder-meta">
                        <span th:if="${parent != null}">Subfolder of <strong th:text="${parent.name}"></strong></span>
                        <span th:if="${parent != null}">¬∑</span>
                        <span th:text="${folder.folderCount} + ' topics ¬∑ ' + ${folder.postCount} + ' posts'">21 topics ¬∑ 184 posts</span>
                        <span>¬∑</span>
                        <span>Last activity 12 minutes ago (TODO)</span>
                    </div>
                </div>
                <div class="folder-header-actions">
                    <a class="btn btn-primary" th:href="@{/forum/posts/new?folderId={folderId}(folderId=${folder.id})}"
                       type="button">New topic</a>
                </div>
            </div>

            <div class="folder-layout">
                <!-- LEFT: folder info + tree -->
                <aside class="card folder-sidebar">
                    <div class="folder-sidebar-section">
                        <div class="card-title">Folder details</div>
                        <div class="card-subtitle">
                            (TODO: consider adding a description field)
                        </div>

                        <div class="folder-stats">
                            <div class="folder-stat-item" th:if="${folder.folderCount > 0}">
                                <span class="folder-stat-label">Subfolders</span>
                                <span class="folder-stat-value" th:text="${folder.folderCount}">21</span>
                            </div>
                            <div class="folder-stat-item">
                                <span class="folder-stat-label">Posts</span>
                                <span class="folder-stat-value" th:text="${folder.postCount}">184</span>
                            </div>
                        </div>
                    </div>

                    <!-- PARENT FOLDER (one level up) -->
                    <div class="folder-sidebar-section" th:if="${parent != null}">
                        <div class="card-title" style="margin-bottom:0.3rem;">Parent folder</div>

                        <div class="folder-parent">
                            <a class="folder-parent-link"
                               th:href="@{/path/{path}(path=${parent.path})}">
                                <span class="folder-node-icon">‚¨Ö</span>
                                <span class="folder-node-name" th:text="${parent.name}">TV Shows</span>
                            </a>
                            <div class="folder-parent-meta"
                                 th:text="${parent.postCount} + ' topics'">
                                21 topics
                            </div>
                        </div>
                    </div>

                    <!-- CURRENT FOLDER + SIBLINGS -->
                    <div class="folder-sidebar-section">
                        <div class="card-title" style="margin-bottom:0.3rem;">This level</div>
                        <ul class="folder-tree folder-tree--siblings">
                            <!-- Current folder -->
                            <li class="folder-node folder-node--active">
                                <a th:href="@{/path/{path}(path=${folder.path})}">
                                    <span class="folder-node-icon">üìÇ</span>
                                    <span class="folder-node-name" th:text="${folder.name}">Sci-Fi &amp; Fantasy</span>
                                    <span class="folder-node-count"
                                          th:text="${folder.postCount} + ' topics'">9 topics</span>
                                </a>
                            </li>

                            <!-- Siblings (same parent) -->
                            <li class="folder-node" th:each="sibling : ${siblingFolders}">
                                <a th:href="@{/path/{path}(path=${sibling.path})}">
                                    <span class="folder-node-icon">üìÇ</span>
                                    <span class="folder-node-name" th:text="${sibling.name}">Drama</span>
                                    <span class="folder-node-count"
                                          th:text="${sibling.postCount} + ' topics'">8 topics</span>
                                </a>
                            </li>
                        </ul>

                        <div class="folder-pagination" th:if="${siblingFolders.size() > 4}">
                            <button class="btn btn-ghost folder-page-btn" type="button">‚Äπ Prev</button>
                            <span class="folder-page-info">Page 1 of 3</span>
                            <button class="btn btn-ghost folder-page-btn" type="button">Next ‚Ä∫</button>
                        </div>
                    </div>

                    <!-- CHILDREN OF CURRENT FOLDER -->
                    <div class="folder-sidebar-section"
                         th:if="${childFolders != null and !#lists.isEmpty(childFolders)}">
                        <div class="card-title" style="margin-bottom:0.3rem;">Subfolders</div>

                        <ul class="folder-tree folder-tree--children">
                            <li class="folder-node" th:each="child : ${childFolders}">
                                <a th:href="@{/path/{path}(path=${child.path})}">
                                    <span class="folder-node-icon">üìÅ</span>
                                    <span class="folder-node-name" th:text="${child.name}">Star Wars</span>
                                    <span class="folder-node-count"
                                          th:text="${child.postCount} + ' topics'">4 topics</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div class="folder-pagination" th:if="${childFolders.size() > 4}">
                        <button class="btn btn-ghost folder-page-btn" type="button">‚Äπ Prev</button>
                        <span class="folder-page-info">Page 1 of 3</span>
                        <button class="btn btn-ghost folder-page-btn" type="button">Next ‚Ä∫</button>
                    </div>

                </aside>

                <!-- RIGHT: posts list in this folder -->
                <section class="card folder-posts">
                    <div class="folder-toolbar">
                        <div class="folder-toolbar-left">
                            <span class="card-title" th:text="'Topics in ‚Äú' + ${folderName} + '‚Äú'"></span>
                            <span class="folder-toolbar-meta">Showing 1‚Äì10 of 21</span>
                        </div>
                        <div class="folder-toolbar-right">
                            <select class="folder-select">
                                <option>Sort by last activity</option>
                                <option>Sort by newest</option>
                                <option>Sort by most replies</option>
                            </select>
                        </div>
                    </div>

                    <div class="topic-list">
                        <!-- Topics -->
                        <a th:replace="PostPreviewFragment:: post-preview"></a>
                    </div>

                    <!-- Simple pagination mockup -->
                    <div class="folder-pagination">
                        <button class="btn btn-ghost folder-page-btn" type="button">‚Äπ Prev</button>
                        <span class="folder-page-info">Page 1 of 3</span>
                        <button class="btn btn-ghost folder-page-btn" type="button">Next ‚Ä∫</button>
                    </div>
                </section>
            </div>
        </div>
    </main>


    <!-- FOOTER -->
    <footer th:replace="Footer:: footer"></footer>
</div>
</body>
</html>