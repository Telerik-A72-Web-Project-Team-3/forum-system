<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>Forum App – Home</title>
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
    <link href="/css/styles.css" rel="stylesheet"/>
    <script th:src="@{/js/jquery-3.7.1.min.js}"></script>
    <script th:src="@{/js/app.js}"></script>
</head>
<body>
<div class="page">
    <!-- NAVBAR -->
    <header th:replace="Header:: navigation-bar"></header>
    <!-- MAIN -->
    <main class="folder-page">
        <div class="container">

            <!--            <div class="folder-header-row">-->
            <!--                <div>-->
            <!--                    <h1 class="folder-title" th:if="${tag != null}">Posts with tag <strong-->
            <!--                            th:text="${tag.name}"></strong></h1>-->
            <!--                    <div class="folder-meta">-->
            <!--                        <span>Subfolder of </span>-->
            <!--                        <span>·</span>-->
            <!--                        <span>21 topics · 184 posts</span>-->
            <!--                        <span>·</span>-->
            <!--                        <span>Last activity 12 minutes ago (TODO)</span>-->
            <!--                    </div>-->
            <!--                </div>-->
            <!--                <div class="folder-header-actions">-->
            <!--                    <a class="btn btn-primary" type="button">New topic</a>-->
            <!--                </div>-->
            <!--            </div>-->

            <section class="card folder-posts">
                <div class="folder-toolbar">
                    <div class="folder-toolbar-left">
                        <span class="card-title">Posts:</span>
                        <span class="folder-toolbar-meta">Showing 1–10 of 21</span>
                    </div>
                    <div class="folder-toolbar-right">
                        <select class="tag-select folder-select"
                                name="tagId"
                                th:value="${tagId}">
                            <option th:selected="${tagId == 0}" value="0">Any tag</option>
                            <option th:each="tag: ${tags}" th:selected="${tag.id == tagId}"
                                    th:value="${tag.id}">
                                Tag: <span th:text="${tag.name}"></span></option>
                        </select>
                        <select class="post-order-by folder-select"
                                name="orderBy"
                                th:value="${orderBy}">
                            <option th:selected="${orderBy == 'title'}" value="title">Sort by title</option>
                            <option th:selected="${orderBy == 'created_at'}" value="created_at">Sort by newest</option>
                            <option th:selected="${orderBy == 'comments_count'}" value="comments_count">Sort by most
                                replies
                            </option>
                        </select>
                    </div>
                </div>

                <div class="topic-list">
                    <!-- Topics -->
                    <a th:replace="PostPreviewFragment:: post-preview"></a>
                </div>

                <!-- Simple pagination mockup -->
                <div class="folder-pagination">
                    <button class="btn btn-ghost folder-page-btn" type="button">‹ Prev</button>
                    <span class="folder-page-info">Page 1 of 3</span>
                    <button class="btn btn-ghost folder-page-btn" type="button">Next ›</button>
                </div>
            </section>
        </div>
    </main>


    <!-- FOOTER -->
    <footer th:replace="Footer:: footer"></footer>
</div>
</body>
<script>
    $('.post-order-by').on('change', function () {
        window.location.search = $.param({orderBy: $('.post-order-by').val(), tagId: $('.tag-select').val()});
    })
    $('.tag-select').on('change', function () {
        window.location.search = $.param({orderBy: $('.post-order-by').val(), tagId: $('.tag-select').val()});
    })
</script>

</html>